
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Museum</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
    <!-- Add this if it's not already included in your layout -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
</head>


<body>
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">Museum Search</a>
        <form class="d-flex" action="/search" method="post">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="search">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
        <div class="ms-auto">
            <a class="btn btn-primary" href="/add">Add Museum</a>
        </div>
    </nav>

    <div class="container mt-4">
        <h2>Edit Museum</h2>
        
        <!-- Display any validation errors -->
        {% if errors %}
        <div class="alert alert-danger">
            <ul>
                {% for error in errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <form method="POST">
            <div class="mb-3">
                <label for="title" class="form-label">Title:</label>
                <input type="text" class="form-control" id="title" name="title" value="{{ item['title'] }}" required>
            </div>
            
            <div class="mb-3">
                <label for="image" class="form-label">Image URL:</label>
                <input type="url" class="form-control" id="image" name="image" value="{{ item['image'] }}" required>
            </div>
            
            <div class="mb-3">
                <label for="year" class="form-label">Year Established:</label>
                <input type="text" class="form-control" id="year" name="year" value="{{ item['year'] }}" required>
            </div>
            
            <div class="mb-3">
                <label for="summary" class="form-label">Summary:</label>
                <textarea class="form-control" id="summary" name="summary" rows="4" required>{{ item['summary'] }}</textarea>
            </div>
            
            <div class="mb-3">
                <label for="director" class="form-label">Director(s) (comma-separated):</label>
                <input type="text" class="form-control" id="director" name="director" value="{{ item['director']|join(', ') }}" required>
            </div>
            
            <div class="mb-3">
                <label for="budget" class="form-label">Budget/Entry Fee:</label>
                <input type="text" class="form-control" id="budget" name="budget" value="{{ item['budget'] }}" required>
            </div>
            
            <div class="mb-3">
                <label for="features" class="form-label">Features (comma-separated):</label>
                <input type="text" class="form-control" id="features" name="features" value="{{ item['features']|join(', ') }}" required>
            </div>
            
            <div class="mb-3">
                <label for="score" class="form-label">Rating (out of 10):</label>
                <input type="text" class="form-control" id="score" name="score" value="{{ item['score'] }}" required>
            </div>
            
            <div class="mb-3">
                <label for="genres" class="form-label">Genres (comma-separated):</label>
                <input type="text" class="form-control" id="genres" name="genres" value="{{ item['genres']|join(', ') }}" required>
            </div>
            
            <div class="mb-3">
                <label for="similar_ids" class="form-label">Similar Museum IDs (comma-separated):</label>
                <input type="text" class="form-control" id="similar_ids" name="similar_ids" value="{{ item['similar museum ids']|join(', ') }}" required>
            </div>
                            <!-- Replace the buttons section in edit.html -->
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" class="btn btn-secondary" id="discardBtn">Discard Changes</button>
            </div>

            <!-- Add this modal dialog for confirmation -->
            <div class="modal fade" id="confirmDiscardModal" tabindex="-1" aria-labelledby="confirmDiscardModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="confirmDiscardModalLabel">Confirm Discard Changes</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Are you sure you want to discard all changes? This action cannot be undone.
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No, Keep Editing</button>
                            <a href="{{ url_for('view_item', museum_id=item['id']) }}" class="btn btn-danger">Yes, Discard Changes</a>
                        </div>
                    </div>
                </div>
            </div>
                        
        </form>
    </div>



<!-- Add Bootstrap JavaScript for the modal to work -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>

<!-- JavaScript to handle the discard button click -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const discardBtn = document.getElementById('discardBtn');
        const confirmDiscardModal = new bootstrap.Modal(document.getElementById('confirmDiscardModal'));
        
        discardBtn.addEventListener('click', function() {
            confirmDiscardModal.show();
        });
    });
</script>

</body>
</html>